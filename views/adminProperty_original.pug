doctype html
html(lang='en')
  include common/adminHeader.pug
  +head("Admin Property")
  #preloader2(style="display:none;z-index:999")
    .loader2(style="display:none")
  body#page-top
    div(id="overlay2")
      .overlaySection
        .card.shadow.mb-4
          .card-body
            .row
              .col-sm-6
                h3(style="font-weight:700") Export Calendar
              .col-sm-6(style="text-align:right")
                button#closeExport(style="background:none; border:none") X
            .row
              .col-sm-12
                p(style="margin-top:10px") Copy and paste the link into other ICAL applications
            .row(style="margin-top:20px")
              .col-sm-12 
                p.form-control #{ical}
                
            
    // Page Wrapper
    #wrapper
      // Sidebar
      include common/adminNavbar.pug
      +navbar(user)
      script(src="js/adminProperty.js")
      //- script(src="js/availability.js")
      // Content Wrapper
      #content-wrapper.d-flex.flex-column
        // Main Content
        #content
          // Topbar
          include common/adminHorizontalNavbar.pug
          +navbar(user)
          // Begin Page Content
          .container-fluid
            // Page Heading
            .d-sm-flex.align-items-center.justify-content-between.mb-4
              h1.h3.mb-0.text-gray-800 Property
            .row
              .col-lg-8.offset-lg-2
                .card.shadow.mb-4
                  .card-body(style="text-align:left")
                    .row
                      .col-sm-12
                        if(success == true)
                          p.small.text-danger Property Successfully update!
                    .row
                      .col-sm-6
                        label(for="hide" style="text-align:center") Hide
                        br
                        label.switch
                          input(type="checkbox" id="hide" style="text-align:center")
                          span.slider.round
                      .col-sm-6(style="text-align:right")
                        button.primary-btn#availability See Availability
                    .row
                      input(id="property" style="display:none" value=property)
                      .col-sm-6
                        
                        label(for="propertyName" style="text-align:left") Property Name
                        input.form-control(style="width:100% !important;text-align:left;" id="propertyName" required=true, name='propertyName', type='text' value=property.name)
                        p.small.text-danger(id="propertyNameError")
                      .col-sm-6
                        label(for="pricePerday" style="text-align:left") Â£ Price Per Day
                        input.form-control(style="width:100% !important;text-align:left;" id="pricePerDay" required=true, name='pricePerDay', type='text' value=(parseFloat(property.pricePerDay)).toFixed(2))
                        p.small.text-danger(id="pricePerdayError")
                    .row(style="margin-top:10px;")
                      .col-sm-4(style="text-align:center")
                          label(for="bedrooms" style="text-align:center") Bedrooms
                          input.form-control(type="number" id="bedrooms" min=0 style="text-align:center" value=property.bedrooms)
                          p.small.text-danger(id="bedroomError")
                      .col-sm-4(style="text-align:center")
                          label(for="bathrooms" style="text-align:center") Bathrooms
                          input.form-control(type="number" id="bathrooms" min=0 style="text-align:center" value=property.bathrooms)
                          p.small.text-danger(id="bathroomError")
                      .col-sm-4(style="text-align:center")
                          label(for="guests" style="text-align:center") Guests
                          input.form-control(type="number" id="guests" min=0 style="text-align:center" value=property.guests)
                          p.small.text-danger(id="guestError")
                    
                    .row(style="margin-top:10px;" id="picturesSection")
                      .col-sm-12(style="text-align:center")
                          label Pictures
                      .row
                        .col-sm-3
                          div(style="width:100%;height:150px;border:solid 1px black")
                            img#displayImage1(src=property.displayImage1 style="object-fit:scale-down;height:100%;width:100%")
                          label.primary-btn(for="picture1" style="width:100%;font-size:8pt !important;cursor:pointer;") Main Picture
                          input(id="picture1" type='file' style="opacity:0" accept="image/x-png,image/jpeg" data-index=1)
                          p.small.text-danger(id="picture1Error" style="text-align:center")
                          
                        .col-sm-3
                          div(style="width:100%;height:150px;border:solid 1px black")
                            img#displayImage2(src=property.displayImage2 style="object-fit:scale-down;height:100%;width:100%")
                          
                          label.primary-btn(for="picture2" style="width:100%;font-size:8pt !important;cursor:pointer;") Picture 2
                          input(id="picture2" type='file' style="opacity:0" accept="image/x-png,image/jpeg" data-index=2)
                          if(property.displayImage2)
                            button.primary-btn(id="removeDisplayImage2" style="width:100%;font-size:8pt !important;" data-index=2) Remove Picture
                             
                          p.small.text-danger(id="picture2Error" style="text-align:center")
                        .col-sm-3
                          div(style="width:100%;height:150px;border:solid 1px black")
                            img#displayImage3(src=property.displayImage3 style="object-fit:scale-down;height:100%;width:100%")
                          
                          label.primary-btn(for="picture3" style="width:100%;font-size:8pt !important;cursor:pointer;") Picture 3
                          input(id='picture3' type='file' style="opacity:0" accept="image/x-png,image/jpeg" data-index=3)
                          if(property.displayImage3)
                            button.primary-btn(id="removeDisplayImage3" style="width:100%;font-size:8pt !important;" data-index=3) Remove Picture
                          
                          p.small.text-danger(id="picture3Error" style="text-align:center")
                        .col-sm-3
                          div(style="width:100%;height:150px;border:solid 1px black")
                            img#displayImage4(src=property.displayImage4 style="object-fit:scale-down;height:100%;width:100%")
                          
                          label.primary-btn(for="picture4" style="width:100%;font-size:8pt !important;cursor:pointer;") Picture 4
                          input(id='picture4' type='file' style="opacity:0" accept="image/x-png,image/jpeg" data-index=4)
                          if(property.displayImage4)
                            button.primary-btn(id="removeDisplayImage4" style="width:100%;font-size:8pt !important;" data-index=4) Remove Picture
                          p.small.text-danger(id="picture4Error" style="text-align:center")

                    .row(style="margin-top:10px;" id="locationSection")
                      .col-sm-12(style="text-align:center")
                          label Property Address
                          .row
                            .col-sm-6
                                label(for="addressLine1" style="text-align:left") Address Line 1
                                input.form-control(style="width:100% !important;text-align:left;" id="addressLine1" required=true, name='addressLine1', type='text' value=property.addressLine1)
                                p.small.text-danger(id="addressLine1Error")
                            .col-sm-6
                                label(for="addressLine2" style="text-align:left") Address Line 2
                                input.form-control(style="width:100% !important;text-align:left;" id="addressLine2" required=true, name='addressLine2', type='text' value=property.addressLine2)
                          .row
                              
                            .col-sm-4
                              label(for="city" style="text-align:left") City
                              input(style="display:none" id="currentCityId" value=property.cityId)
                              select.form-control(style="width:100% !important;text-align:left;" id="city")
                                each city in cities
                                  option(value=city.id) #{city.name}
                              p.small.text-danger(id="cityError")
                            .col-sm-4
                                label(for="town" style="text-align:left") Town
                                select.form-control(style="width:100% !important;text-align:left;" id="town")

                                p.small.text-danger(id="townError")
                            .col-sm-4
                              label(for="postCode" style="text-align:left") Post Code
                              input.form-control(style="width:100% !important;text-align:left;" id="postCode" required=true, name='postCode', type='text' value=property.postCode)
                              p.small.text-danger(id="postCodeError")

                    .row(style="margin-top:10px;" id="descriptionSection")
                        .col-sm-12
                            label(for="description") Description
                            textarea.form-control(id="description" style="width:100%;margin-bottom:20px" maxlength=255 name="", cols="30", rows="10") #{property.description}
                            p.small.text-danger(id="descriptionError")

                    .row(style="margin-top:10px;" id="calendarSyncSection")
                      .col-sm-12( id="calendarSyncRows")
                          h5(for="description") Calendar Sync
                          if(propertySyncs)
                            each calendarSync in propertySyncs
                              .row
                                .col-sm-7
                                  p.form-control(style="width:100% !important;text-align:left;") #{calendarSync.name}
                                .col-sm-5
                                  button.primary-btn.remove(data-remove-id=calendarSync.id) Remove
                    .row(style="margin-top:20px;text-align:center")
                        .col-sm-6
                          button.primary-btn#newRow Add New Row
                        .col-sm-6
                          button.primary-btn#exportCalendar Export Calendar
                                              

                    .row(style="margin-top:20px;text-align:center")
                      .col-sm-12
                        input.primary-btn(type="submit" id="editProperty" value="Edit Property")
                        p.small.text-danger(id="noChangeError")
        include common/adminFooter.pug
        +footer()